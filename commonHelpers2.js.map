{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  inputDate: document.querySelector('input[type=\"text\"]'),\n  btnStart: document.querySelector('button[data-start]'),\n  days: document.querySelector('span[data-days]'),\n  hours: document.querySelector('span[data-hours]'),\n  minutes: document.querySelector('span[data-minutes]'),\n  seconds: document.querySelector('span[data-seconds]'),\n};\n\nrefs.btnStart.disabled = true;\nlet timer = null;\nlet inputDateValue;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    checkDate(selectedDates[0].getTime());\n    clearInterval(timer);\n    fillResultDisplay();\n  },\n};\nflatpickr(refs.inputDate, options);\n\nfunction checkDate(date) {\n  let startDate = new Date().getTime();\n  if (startDate > date) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n    });\n    if (!refs.btnStart.disabled) {\n      refs.btnStart.disabled = true;\n    }\n  } else {\n    fillResultDisplay(convertMs(date - new Date().getTime()));\n    inputDateValue = date;\n    refs.btnStart.disabled = false;\n    iziToast.success({\n      title: 'OK',\n      message: 'Let`s go!',\n    });\n    refs.btnStart.addEventListener('click', () => {\n      timer = setInterval(() => {\n        if (date >= new Date().getTime()) {\n          const countdownTime = convertMs(date - new Date().getTime());\n          if (!refs.btnStart.disabled) {\n            refs.btnStart.disabled = true;\n          }\n          fillResultDisplay(countdownTime);\n          return;\n        } else {\n          clearInterval(timer);\n          return iziToast.warning({\n            title: 'Time is up',\n            message: 'Shall we do it again?',\n          });\n        }\n      }, 1000);\n    });\n  }\n}\n\nfunction fillResultDisplay({ days, hours, minutes, seconds }) {\n  if (days.length >= 3) {\n    refs.days.textContent = days;\n  } else {\n    refs.days.textContent = addLeadingZero('' + days);\n  }\n  refs.hours.textContent = addLeadingZero('' + hours);\n  refs.minutes.textContent = addLeadingZero('' + minutes);\n  refs.seconds.textContent = addLeadingZero('' + seconds);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  if (value.length === 1) {\n    return value.padStart(2, '0');\n  } else {\n    return value;\n  }\n}\n"],"names":["refs","timer","options","selectedDates","checkDate","fillResultDisplay","flatpickr","date","iziToast","convertMs","countdownTime","days","hours","minutes","seconds","addLeadingZero","ms","value"],"mappings":"+IAKA,MAAMA,EAAO,CACX,UAAW,SAAS,cAAc,oBAAoB,EACtD,SAAU,SAAS,cAAc,oBAAoB,EACrD,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,CACtD,EAEAA,EAAK,SAAS,SAAW,GACzB,IAAIC,EAAQ,KAGZ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAUD,EAAc,GAAG,QAAS,CAAA,EACpC,cAAcF,CAAK,EACnBI,GACD,CACH,EACAC,EAAUN,EAAK,UAAWE,CAAO,EAEjC,SAASE,EAAUG,EAAM,CACP,IAAI,KAAM,EAAC,QAAO,EAClBA,GACdC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,EACIR,EAAK,SAAS,WACjBA,EAAK,SAAS,SAAW,MAG3BK,EAAkBI,EAAUF,EAAO,IAAI,KAAI,EAAG,QAAS,CAAA,CAAC,EAExDP,EAAK,SAAS,SAAW,GACzBQ,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,WACf,CAAK,EACDR,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC5CC,EAAQ,YAAY,IAAM,CACxB,GAAIM,GAAQ,IAAI,KAAM,EAAC,QAAO,EAAI,CAChC,MAAMG,EAAgBD,EAAUF,EAAO,IAAI,KAAM,EAAC,QAAO,CAAE,EACtDP,EAAK,SAAS,WACjBA,EAAK,SAAS,SAAW,IAE3BK,EAAkBK,CAAa,EAC/B,MACV,KACU,sBAAcT,CAAK,EACZO,EAAS,QAAQ,CACtB,MAAO,aACP,QAAS,uBACrB,CAAW,CAEJ,EAAE,GAAI,CACb,CAAK,EAEL,CAEA,SAASH,EAAkB,CAAE,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACxDH,EAAK,QAAU,EACjBX,EAAK,KAAK,YAAcW,EAExBX,EAAK,KAAK,YAAce,EAAe,GAAKJ,CAAI,EAElDX,EAAK,MAAM,YAAce,EAAe,GAAKH,CAAK,EAClDZ,EAAK,QAAQ,YAAce,EAAe,GAAKF,CAAO,EACtDb,EAAK,QAAQ,YAAce,EAAe,GAAKD,CAAO,CACxD,CAEA,SAASL,EAAUO,EAAI,CAQrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAE1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeE,EAAO,CAC7B,OAAIA,EAAM,SAAW,EACZA,EAAM,SAAS,EAAG,GAAG,EAErBA,CAEX"}